<!DOCTYPE html>
<html>
    <head>
        <title>TypeTree Demo | Netention</title>
        
        <script src="/lib/jquery/jquery.js"></script>
        <script src="netention.js"></script> 
        
        <script>
            var a, b;
            var aWidget, bWidget;
            
            function initFocus() {
                a = objNew();
                objName(a, 'Left Object');
                objAddValue(a, 'integer', 3);
        
                b = objNew();
                objName(b, 'Right Object');                
                objAddValue(b, 'integer', '<4');
            }
            
            function updateMatch() {
                $('#MatchView').html(JSON.stringify(objCompare(a, b), null, 4));
            }
            
            function updateAFocus() {
                aWidget = renderObject(a, true, function() { return a; }, function(e) { 
                    a = e; 
                    updateAFocus(); 
                    updateMatch();
                });
                
                $('#A').html( aWidget );
            }
            function updateBFocus() {
                bWidget = renderObject(b, true, function() { return b; }, function(e) { 
                    b = e; 
                    updateBFocus(); 
                    updateMatch();
                } );
                
                $('#B').html( bWidget );
            }
        
            
            $(document).ready(function(){
                netention(function(self) {
                    window.self = self;
             
                    initFocus();
                    
                    updateAFocus();
                    updateBFocus();
                    
                    updateMatch();
                    
                    $('#MatchUpdate').click(function() {
                        a = aWidget.getEditedFocus();
                        b = bWidget.getEditedFocus();
                        updateMatch();
                    });
                });
            });
            
        </script>
        <style>
            
            #A, #B, #Match {
                width: 30%;
                height: 100%;
                position: fixed;
                overflow: auto;
            }
            
            #A {
                background-color: #ddf;
                left: 0px;
            }
            #B {
                background-color: #dfd;
                right: 0px;
            }
            #Match {
                left: auto;
                left: 33%;
            }
            
            .ui-widget-content { border: none; }
        </style>
    </head>
    <body>
        <div id="A">
        </div>
        <div id="Match">
            <center><button id="MatchUpdate">Update</button></center>
            <br/>
            <div id="MatchView"></div>
        </div>
        <div id="B">
        </div>
    </body>
</html>